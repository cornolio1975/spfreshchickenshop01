(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{2077:function(e,s,t){Promise.resolve().then(t.bind(t,10))},94:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},489:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2235:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},10:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(3827),n=t(4090),r=t(94),l=t(7731),i=t(489),d=t(2235),c=t(575),o=t(5671),h=t(2782),u=t(2647),x=t(5887),p=t(4958),m=t(6288);function j(){let[e,s]=(0,n.useState)([]),[t,j]=(0,n.useState)(!0),[f,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[N,k]=(0,n.useState)({name:"",address:"",phone:"",status:"Active"}),b=async()=>{j(!0);let{data:e,error:t}=await p.O.from("shops").select("*").order("name");t?("42P01"===t.code?m.toast.error('DB Error: "shops" table missing. Please run the SQL provided.'):m.toast.error("Failed to load shops"),console.error(t)):s(e||[]),j(!1)};(0,n.useEffect)(()=>{b()},[]);let w=e=>{e?(y(e),k({name:e.name||"",address:e.address||"",phone:e.phone||"",status:e.status||"Active"})):(y(null),k({name:"",address:"",phone:"",status:"Active"})),g(!0)},S=async e=>{e.preventDefault();let s={name:N.name,address:N.address,phone:N.phone,status:N.status};try{if(v){let{error:e}=await p.O.from("shops").update(s).eq("id",v.id);if(e)throw e;m.toast.success("Shop updated")}else{let{error:e}=await p.O.from("shops").insert([s]);if(e)throw e;m.toast.success("Shop created")}g(!1),b()}catch(e){m.toast.error(e.message)}},C=async e=>{if(confirm("Are you sure you want to delete this shop?"))try{let{error:s}=await p.O.from("shops").delete().eq("id",e);if(s)throw s;m.toast.success("Shop deleted"),b()}catch(e){m.toast.error(e.message)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Shops"}),(0,a.jsxs)(c.z,{onClick:()=>w(),children:[(0,a.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Add Shop"]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"All Shops"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)(x.iA,{children:[(0,a.jsx)(x.xD,{children:(0,a.jsxs)(x.SC,{children:[(0,a.jsx)(x.ss,{children:"Name"}),(0,a.jsx)(x.ss,{children:"Address"}),(0,a.jsx)(x.ss,{children:"Phone"}),(0,a.jsx)(x.ss,{children:"Status"}),(0,a.jsx)(x.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsxs)(x.RM,{children:[0===e.length&&!t&&(0,a.jsx)(x.SC,{children:(0,a.jsx)(x.pj,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No shops found."})}),e.map(e=>(0,a.jsxs)(x.SC,{children:[(0,a.jsx)(x.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(x.pj,{children:e.address}),(0,a.jsx)(x.pj,{children:e.phone}),(0,a.jsx)(x.pj,{children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("Active"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"),children:e.status})}),(0,a.jsxs)(x.pj,{className:"text-right space-x-2",children:[(0,a.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>w(e),children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)(c.z,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>C(e.id),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]})]},e.id))]})]})})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,a.jsxs)(o.Zb,{className:"w-full max-w-lg bg-background shadow-lg animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between border-b px-6 py-4",children:[(0,a.jsx)(o.ll,{children:v?"Edit Shop":"Add Shop"}),(0,a.jsx)(c.z,{variant:"ghost",size:"icon",onClick:()=>g(!1),children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"name",children:"Shop Name"}),(0,a.jsx)(h.I,{id:"name",required:!0,value:N.name,onChange:e=>k({...N,name:e.target.value}),placeholder:"Main Street Branch"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"address",children:"Address"}),(0,a.jsx)(h.I,{id:"address",value:N.address,onChange:e=>k({...N,address:e.target.value}),placeholder:"123 Chicken St"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(h.I,{id:"phone",value:N.phone,onChange:e=>k({...N,phone:e.target.value}),placeholder:"555-0100"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)("select",{id:"status",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:N.status,onChange:e=>k({...N,status:e.target.value}),children:[(0,a.jsx)("option",{value:"Active",children:"Active"}),(0,a.jsx)("option",{value:"Maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"Closed",children:"Closed"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,a.jsx)(c.z,{type:"submit",children:"Save Changes"})]})]})})]})})]})}}},function(e){e.O(0,[150,620,688,288,543,971,69,744],function(){return e(e.s=2077)}),_N_E=e.O()}]);