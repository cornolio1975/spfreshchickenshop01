(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{3188:function(e,t,r){Promise.resolve().then(r.bind(r,6814))},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(4090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{color:o="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:f,...p}=r;return(0,n.createElement)("svg",{ref:s,...a,width:i,height:i,stroke:o,strokeWidth:c?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat(l(e)),u].join(" "),...p},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},6814:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g},dynamic:function(){return v}});var n=r(3827),a=r(4090),l=r(575),s=r(2782),o=r(2647),i=r(5671),d=r(6288),c=r(4958),u=r(7461);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,u.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),p=(0,u.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),m=(0,u.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),h=(0,u.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),y=(0,u.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),v="force-dynamic";function g(){let[e,t]=(0,a.useState)(!1),[r,u]=(0,a.useState)(null),[v,g]=(0,a.useState)({name:"",address:"",phone:"",email:"",tax_id:"",website:""}),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{b()},[]);let b=async()=>{t(!0);let{data:e,error:r}=await c.O.from("company_settings").select("*").single();e&&(u(e.id),g({name:e.name||"",address:e.address||"",phone:e.phone||"",email:e.email||"",tax_id:e.tax_id||"",website:e.website||""})),t(!1)},w=async e=>{e.preventDefault(),t(!0);try{if(r){let{error:e}=await c.O.from("company_settings").update(v).eq("id",r);if(e)throw e}else{let{data:e,error:t}=await c.O.from("company_settings").insert([v]).select().single();if(t)throw t;e&&u(e.id)}d.toast.success("Company profile updated successfully.")}catch(e){d.toast.error(e.message||"Failed to save settings.")}finally{t(!1)}},j=async()=>{try{d.toast.info("Preparing backup...");let[e,t,r,n]=await Promise.all([c.O.from("products").select("*"),c.O.from("vendors").select("*"),c.O.from("shops").select("*"),c.O.from("inventory_adjustments").select("*")]),a={timestamp:new Date().toISOString(),version:"1.0",data:{products:e.data||[],vendors:t.data||[],shops:r.data||[],inventory_adjustments:n.data||[]}},l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),s=URL.createObjectURL(l),o=document.createElement("a");o.href=s,o.download="backup_sp_fresh_".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),d.toast.success("Backup downloaded successfully.")}catch(e){d.toast.error("Export failed."),console.error(e)}},N=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(!confirm("⚠️ WARNING: Importing data heavily relies on ID matching. This creates new records if not found. Continue?")){e.target.value="";return}let n=new FileReader;n.onload=async e=>{try{var t,r,n,a;let l=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);if(!l.data)throw Error("Invalid backup file format");d.toast.info("Starting restore..."),(null===(r=l.data.vendors)||void 0===r?void 0:r.length)&&await c.O.from("vendors").upsert(l.data.vendors,{onConflict:"id"}),(null===(n=l.data.products)||void 0===n?void 0:n.length)&&await c.O.from("products").upsert(l.data.products,{onConflict:"id"}),(null===(a=l.data.shops)||void 0===a?void 0:a.length)&&await c.O.from("shops").upsert(l.data.shops,{onConflict:"id"}),d.toast.success("Restore completed! Please refresh."),setTimeout(()=>window.location.reload(),1500)}catch(e){d.toast.error("Restore failed: "+e.message),console.error(e)}},n.readAsText(r),e.target.value=""};return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"System Settings"}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Company Profile"}),(0,n.jsx)(i.SZ,{children:"Details used for invoices and reports."})]}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o._,{children:"Company / Shop Name"}),(0,n.jsx)(s.I,{value:v.name,onChange:e=>g({...v,name:e.target.value}),placeholder:"SP Fresh Chicken"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o._,{children:"Phone Contact"}),(0,n.jsx)(s.I,{value:v.phone,onChange:e=>g({...v,phone:e.target.value}),placeholder:"+60..."})]}),(0,n.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,n.jsx)(o._,{children:"Address"}),(0,n.jsx)(s.I,{value:v.address,onChange:e=>g({...v,address:e.target.value}),placeholder:"Running No, Street..."})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o._,{children:"Email (Optional)"}),(0,n.jsx)(s.I,{value:v.email,onChange:e=>g({...v,email:e.target.value}),placeholder:"admin@example.com"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o._,{children:"Tax / Reg ID (Optional)"}),(0,n.jsx)(s.I,{value:v.tax_id,onChange:e=>g({...v,tax_id:e.target.value}),placeholder:"SSM-12345"})]})]}),(0,n.jsx)("div",{className:"flex justify-end pt-4",children:(0,n.jsxs)(l.z,{type:"submit",disabled:e,children:[e?(0,n.jsx)(f,{className:"w-4 h-4 animate-spin mr-2"}):(0,n.jsx)(p,{className:"w-4 h-4 mr-2"}),"Save Profile"]})})]})})]}),(0,n.jsxs)(i.Zb,{className:"border-orange-200 bg-orange-50/10",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{className:"text-orange-900",children:"Data Management"}),(0,n.jsx)(i.SZ,{children:"Backup and restore your system data (Products, Vendors, Shops)."})]}),(0,n.jsxs)(i.aY,{className:"flex flex-col md:flex-row gap-4",children:[(0,n.jsxs)(l.z,{variant:"outline",onClick:j,className:"flex-1 bg-white hover:bg-gray-50",children:[(0,n.jsx)(m,{className:"w-4 h-4 mr-2"}),"Export Data (JSON)"]}),(0,n.jsxs)("div",{className:"relative flex-1",children:[(0,n.jsx)("input",{type:"file",ref:x,onChange:N,accept:".json",className:"hidden"}),(0,n.jsxs)(l.z,{variant:"outline",onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},className:"w-full bg-white hover:bg-gray-50 border-dashed border-2",children:[(0,n.jsx)(h,{className:"w-4 h-4 mr-2"}),"Import Data (Restore)"]})]})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2 p-4 bg-muted/50 rounded-sm text-xs text-muted-foreground",children:[(0,n.jsx)(y,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Note:"})," Sales history and logs are not typically included in lightweight backups to prevent large file sizes. Full database backups should be managed via the Supabase Dashboard. This export is primarily for Catalog Data (Products, Vendors, Shops)."]})]})]})}},575:function(e,t,r){"use strict";r.d(t,{cn:function(){return o},z:function(){return i}});var n=r(3827),a=r(4090),l=r(3167),s=r(1367);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,l.W)(t))}let i=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:l="default",...s}=e;return(0,n.jsx)("button",{className:o("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-indigo-600 disabled:pointer-events-none disabled:opacity-50",{default:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-sm",outline:"border border-gray-200 bg-white hover:bg-gray-100 text-gray-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:text-zinc-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-indigo-600 underline-offset-4 hover:underline"}[a],{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}[l],r),ref:t,...s})});i.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},ll:function(){return i}});var n=r(3827),a=r(4090),l=r(2169);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},2782:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(3827),a=r(4090),l=r(575);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,l.cn)("flex h-9 w-full rounded-md border border-gray-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-indigo-600 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:placeholder:text-gray-400",r),ref:t,...s})});s.displayName="Input"},2647:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(3827),a=r(4090),l=r(6130),s=r(9769),o=r(2169);let i=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(l.f,{ref:t,className:(0,o.cn)(i(),r),...a})});d.displayName=l.f.displayName},4958:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(7688).eI)("https://rujkkngxyuoahrkbdnyq.supabase.co","sb_publishable_VBJQqsGSbSej0VbYY9B2Ow_vK6uyNbq")},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var n=r(3167),a=r(1367);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},6130:function(e,t,r){"use strict";r.d(t,{f:function(){return m}});var n=r(4090),a=r.t(n,2);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}r(9542);var s=r(3827),o=Symbol.for("react.lazy"),i=a[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===o&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=Symbol("radix.slottable");function u(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(d(r)&&"function"==typeof i&&(r=i(r._payload)),n.isValidElement(r)){var s,o,c;let e,i;let d=(e=null===(o=Object.getOwnPropertyDescriptor((s=r).props,"ref"))||void 0===o?void 0:o.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=null===(c=Object.getOwnPropertyDescriptor(s,"ref"))||void 0===c?void 0:c.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref,u=function(e,t){let r={...t};for(let n in t){let a=e[n],l=t[n];/^on[A-Z]/.test(n)?a&&l?r[n]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=l(...t);return a(...t),n}:a&&(r[n]=a):"style"===n?r[n]={...a,...l}:"className"===n&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(u.ref=t?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1,n=t.map(t=>{let n=l(t,e);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let e=0;e<n.length;e++){let r=n[e];"function"==typeof r?r():l(t[e],null)}}}}(t,d):d),n.cloneElement(r,u)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),r=n.forwardRef((e,r)=>{let{children:a,...l}=e;d(a)&&"function"==typeof i&&(a=i(a._payload));let o=n.Children.toArray(a),c=o.find(u);if(c){let e=c.props.children,a=o.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...l,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,s.jsx)(t,{...l,ref:r,children:a})});return r.displayName="".concat(e,".Slot"),r}("Primitive.".concat(t)),a=n.forwardRef((e,n)=>{let{asChild:a,...l}=e,o=a?r:t;return window[Symbol.for("radix-ui")]=!0,(0,s.jsx)(o,{...l,ref:n})});return a.displayName="Primitive.".concat(t),{...e,[t]:a}},{}),p=n.forwardRef((e,t)=>(0,s.jsx)(f.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));p.displayName="Label";var m=p},9769:function(e,t,r){"use strict";r.d(t,{j:function(){return s}});var n=r(3167);let a=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,l=n.W,s=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],n=null==o?void 0:o[e];if(null===t)return null;let l=a(t)||a(n);return s[e][l]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return l(e,i,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...d}[t]):({...o,...d})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[150,620,688,288,971,69,744],function(){return e(e.s=3188)}),_N_E=e.O()}]);