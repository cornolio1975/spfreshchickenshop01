(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{1472:function(e,s,t){Promise.resolve().then(t.bind(t,3945))},94:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},489:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2235:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3945:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var n=t(3827),a=t(4090),r=t(94),i=t(7731),l=t(489),c=t(2235),d=t(575),o=t(5671),h=t(2782),x=t(2647),u=t(5887),m=t(4958),j=t(6288);function p(){let[e,s]=(0,a.useState)([]),[t,p]=(0,a.useState)(!0),[f,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),[N,b]=(0,a.useState)({name:"",contact_person:"",phone:"",email:"",address:"",status:"Active"}),k=async()=>{p(!0);let{data:e,error:t}=await m.O.from("vendors").select("*").order("name");t?(console.error(t),j.toast.error("Failed to load vendors")):s(e||[]),p(!1)};(0,a.useEffect)(()=>{k()},[]);let w=e=>{e?(y(e),b({name:e.name||"",contact_person:e.contact_person||"",phone:e.phone||"",email:e.email||"",address:e.address||"",status:e.status||"Active"})):(y(null),b({name:"",contact_person:"",phone:"",email:"",address:"",status:"Active"})),g(!0)},C=async e=>{e.preventDefault();let s={...N};try{if(v){let{error:e}=await m.O.from("vendors").update(s).eq("id",v.id);if(e)throw e;j.toast.success("Vendor updated")}else{let{error:e}=await m.O.from("vendors").insert([s]);if(e)throw e;j.toast.success("Vendor created")}g(!1),k()}catch(e){j.toast.error(e.message)}},_=async e=>{if(confirm("Are you sure? This might affect purchase history."))try{let{error:s}=await m.O.from("vendors").delete().eq("id",e);if(s)throw s;j.toast.success("Vendor deleted"),k()}catch(e){j.toast.error(e.message)}};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Vendor Management"}),(0,n.jsxs)(d.z,{onClick:()=>w(),children:[(0,n.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsx)(o.ll,{children:"All Vendors"})}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)(u.iA,{children:[(0,n.jsx)(u.xD,{children:(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.ss,{children:"Vendor Name"}),(0,n.jsx)(u.ss,{children:"Contact Person"}),(0,n.jsx)(u.ss,{children:"Phone"}),(0,n.jsx)(u.ss,{children:"Status"}),(0,n.jsx)(u.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsxs)(u.RM,{children:[0===e.length&&!t&&(0,n.jsx)(u.SC,{children:(0,n.jsx)(u.pj,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No vendors found."})}),e.map(e=>(0,n.jsxs)(u.SC,{children:[(0,n.jsxs)(u.pj,{className:"font-medium",children:[e.name,(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:e.email})]}),(0,n.jsx)(u.pj,{children:e.contact_person}),(0,n.jsx)(u.pj,{children:e.phone}),(0,n.jsx)(u.pj,{children:(0,n.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("Active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,n.jsxs)(u.pj,{className:"text-right space-x-2",children:[(0,n.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>w(e),children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})}),(0,n.jsx)(d.z,{variant:"ghost",size:"icon",className:"text-destruct hover:text-destruct",onClick:()=>_(e.id),children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})]})]},e.id))]})]})})]}),f&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,n.jsxs)(o.Zb,{className:"w-full max-w-lg bg-background shadow-lg animate-in fade-in zoom-in duration-200",children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between border-b px-6 py-4",children:[(0,n.jsx)(o.ll,{children:v?"Edit Vendor":"Add Vendor"}),(0,n.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>g(!1),children:(0,n.jsx)(c.Z,{className:"h-4 w-4"})})]}),(0,n.jsx)(o.aY,{className:"p-6",children:(0,n.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"name",children:"Vendor Name"}),(0,n.jsx)(h.I,{id:"name",required:!0,value:N.name,onChange:e=>b({...N,name:e.target.value})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"contact",children:"Contact Person"}),(0,n.jsx)(h.I,{id:"contact",value:N.contact_person,onChange:e=>b({...N,contact_person:e.target.value})})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"phone",children:"Phone"}),(0,n.jsx)(h.I,{id:"phone",value:N.phone,onChange:e=>b({...N,phone:e.target.value})})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"email",children:"Email"}),(0,n.jsx)(h.I,{id:"email",type:"email",value:N.email,onChange:e=>b({...N,email:e.target.value})})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"address",children:"Address"}),(0,n.jsx)(h.I,{id:"address",value:N.address,onChange:e=>b({...N,address:e.target.value})})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(x._,{htmlFor:"status",children:"Status"}),(0,n.jsxs)("select",{id:"status",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:N.status,onChange:e=>b({...N,status:e.target.value}),children:[(0,n.jsx)("option",{value:"Active",children:"Active"}),(0,n.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,n.jsx)(d.z,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,n.jsx)(d.z,{type:"submit",children:"Save Changes"})]})]})})]})})]})}}},function(e){e.O(0,[150,620,688,288,543,971,69,744],function(){return e(e.s=1472)}),_N_E=e.O()}]);